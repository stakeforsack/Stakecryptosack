
<!doctype html>
<html lang="en">
<head><meta charset="utf-8"><title>Admin Dashboard - GodStake</title>
<link rel="stylesheet" href="/css/premium.css">
</head><body>
<div class="container">
  <div class="header">
    <div class="logo">CryptoYieldPro Admin</div>
    <div><input id="adminKey" placeholder="Admin Key" class="input" style="width:260px"/></div>
  </div>
  <div style="height:18px"></div>
  <div class="admin-panel">
    <div>
      <div class="card neon-glow">
        <h3>Pending Deposits</h3>
        <div id="deposits" class="admin-list small"></div>
      </div>
      <div style="height:18px"></div>
      <div class="card neon-glow">
        <h3>Pending Withdrawals</h3>
        <div id="withdraws" class="admin-list small"></div>
      </div>
    </div>
    <div class="card">
      <h3>Actions</h3>
      <button id="refresh" class="btn" style="width:100%">Refresh Lists</button>
      <div style="height:12px"></div>
      <div><strong>Approve Deposit</strong><br/><input id="approveTx" class="input" placeholder="txId"/><button id="approveDep" class="btn" style="width:100%;margin-top:8px">Approve Deposit</button></div>
      <div style="height:12px"></div>
      <div><strong>Approve Withdraw</strong><br/><input id="approveWTx" class="input" placeholder="txId"/><button id="approveW" class="btn" style="width:100%;margin-top:8px">Approve Withdraw</button></div>
    </div>
  </div>
  <div style="height:18px"></div>
  <div class="card">
    <h3>All Transactions</h3>
    <pre id="allTx" class="small" style="max-height:220px;overflow:auto"></pre>
  </div>
  <div class="footer">CryptoYieldPro â€¢ Admin Panel</div>
</div>
<script>
async function fetchAdmin(endpoint, opts = {}) {
  const key = document.getElementById('adminKey')?.value || '';
  opts.headers = opts.headers || {};
  if (key) opts.headers['x-admin-key'] = key;
  const res = await fetch(endpoint, opts);
  const text = await res.text();
  try { return JSON.parse(text); } catch(e) { return text; }
}

async function refreshAdmin() {
  const deps = await fetchAdmin('/api/admin/pending-deposits');
  const wds = await fetchAdmin('/api/admin/pending-withdraws');
  const txs = await fetchAdmin('/api/admin/all-transactions');
  document.getElementById('depositsList').innerText = JSON.stringify(deps, null, 2);
  document.getElementById('withdrawList').innerText = JSON.stringify(wds, null, 2);
  document.getElementById('txList').innerText = JSON.stringify(txs, null, 2);
}

document.getElementById('refreshBtn').addEventListener('click', refreshAdmin);

// approve sample
async function approveDeposit(txId) {
  const key = document.getElementById('adminKey').value;
  const res = await fetch('/api/admin/approve-deposit', { method:'POST', headers:{'Content-Type':'application/json','x-admin-key':key}, body: JSON.stringify({ txId }) });
  alert(await res.text());
  refreshAdmin();
}
</script>

</body></html>
